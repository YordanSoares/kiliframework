(function(a){var l={init:function(){return"undefined"==typeof acf?(console.error("ACF JavaScript library not found!"),!1):(acf.addAction("load_field/type=flexible_content",function(e){e.$el.find(".layout:not(.acf-clone):not(.fc-modal)").each(function(){var e=a(this);l.isNested(e)||l.addModal(e)})}),acf.addAction("after_duplicate",function(a,e){e.is(".layout")&&!l.isNested(a)&&l.addModal(e)}),acf.addAction("append",function(a){a.is(".layout")&&a.find("> .acf-fc-layout-controls a.-pencil").trigger("click")}),acf.addAction("invalid_field",function(a){l.invalidField(a.$el)}),void acf.addAction("valid_field",function(a){l.validField(a.$el)}))},isNested:function(a){return a.parents(".acf-fields").length>1},addModal:function(e){e.addClass("fc-modal"),e.removeClass("-collapsed"),e.find("> .acf-fc-layout-handle").off("click"),e.find("> .acf-fc-layout-controls > a.-collapse").remove(),e.find("> .acf-fc-layout-controls > a.-plus").remove();var o=a('<a class="acf-icon -pencil small light" href="#" data-event="edit-layout" title="Edit layout" />');o.on("click",l.open),e.find("> .acf-fc-layout-controls").append(o),e.prepend('<div class="acf-fc-modal-title" />'),e.find("> .acf-fields, > .acf-table").wrapAll('<div class="acf-fc-modal-content" />'),a(".kiliframework").addClass("visible")},open:function(){var e=a(this).parents(".layout"),o=e.find("> .acf-fc-layout-handle").html(),n=a('<a class="dashicons dashicons-no -cancel" />').on("click",l.close),t=a('<input name="save" type="submit" class="acf-button-update button" id="publish-kili" value="Update">');e.find(".acf-fc-modal-title").html(o).append(n).append(t),e.addClass("-modal"),a("body").append("<div id='acf-flexible-content-modal-overlay' />"),a("#acf-flexible-content-modal-overlay").on("click",l.close),a("body").addClass("acf-modal-open")},close:function(){var l=a(".acf-flexible-content .layout.-modal"),e=l.parents(".acf-field-flexible-content");e=acf.getField(e.attr("data-key")),e.closeLayout(e.$layout(l.index())),a("body").removeClass("acf-modal-open"),a(".acf-flexible-content .layout").removeClass("-modal"),a("#acf-flexible-content-modal-overlay").remove()},invalidField:function(a){a.parents(".layout:not(.acf-clone)").addClass("layout-error-messages")},validField:function(l){l.parents(".layout:not(.acf-clone)").each(function(){var l=a(this);0==l.find(".acf-error").length&&l.removeClass("layout-error-messages")})}};l.init()})(jQuery);